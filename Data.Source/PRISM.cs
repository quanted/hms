using System;
using System.Collections.Generic;
using System.IO;
using System.Net;
using System.Net.Http;
using System.Reflection;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace Data.Source
{
    public class PRISMData {
        public class Metainfo
        {
            public string status { get; set; }
            public string suid { get; set; }
            public string cloud_node { get; set; }
            public string request_ip { get; set; }
            public string service_url { get; set; }
            public string tstamp { get; set; }
            public int cpu_time { get; set; }
            public string expiration_date { get; set; }
        }

        public class Parameter
        {
            public string name { get; set; }
            public object value { get; set; }
        }

        public class Value
        {
            public string cell_index { get; set; }
            public string center_of_cell { get; set; }
            public List<List<object>> data { get; set; }
            public string name { get; set; }
        }

        public class Result
        {
            public string name { get; set; }
            public List<Value> value { get; set; }
        }

        public class PRISM
        {
            public Metainfo metainfo { get; set; }
            public List<Parameter> parameter { get; set; }
            public List<Result> result { get; set; }

        }
    }


    public class PRISM
    {

        public string GetData(out string errorMsg, string dataset, ITimeSeriesInput componentInput)
        {
            errorMsg = "";
            string url = componentInput.BaseURL[0];
            string parameters = ConstructParameterString(out errorMsg, dataset, componentInput);
            if (errorMsg.Contains("ERROR")) { return null; }

            string data = DownloadData(url, parameters).Result;
            if (data.Contains("ERROR")) { errorMsg = data; return null; }

            // TESTING
            // string data = "{\n  \"metainfo\": {\n    \"status\": \"Finished\",\n    \"suid\": \"5a2cc2cd-64f8-11e8-b880-795c8873a957\",\n    \"cloud_node\": \"10.1.104.29\",\n    \"request_ip\": \"73.118.95.127\",\n    \"service_url\": \"http://csip.engr.colostate.edu:8083/csip-climate/m/prism/1.0\",\n    \"csip-climate.version\": \"$version: 3.0.5 58c98b472106 2018-05-21 Jakob23, built at 2018-05-21 11:02 by jenkins$\",\n    \"csip.version\": \"$version: 2.2.15 df7e0a422edd 2018-03-29 lyaege, built at 2018-05-21 11:02 by jenkins$\",\n    \"tstamp\": \"2018-05-31 11:30:46\",\n    \"cpu_time\": 20,\n    \"expiration_date\": \"2018-05-31 11:31:16\"\n  },\n  \"parameter\": [\n    {\n      \"name\": \"input_zone_features\",\n      \"value\": {\n        \"type\": \"FeatureCollection\",\n        \"features\": [{\n          \"type\": \"Feature\",\n          \"properties\": {\n            \"name\": \"pt one\",\n            \"gid\": 1\n          },\n          \"geometry\": {\n            \"type\": \"Point\",\n            \"coordinates\": [\n              -83.355723,\n              33.925673\n            ],\n            \"crs\": {\n              \"type\": \"name\",\n              \"properties\": {\"name\": \"EPSG:4326\"}\n            }\n          }\n        }]\n      }\n    },\n    {\n      \"name\": \"units\",\n      \"value\": \"metric\"\n    },\n    {\n      \"name\": \"climate_data\",\n      \"value\": [\"ppt\"]\n    },\n    {\n      \"name\": \"start_date\",\n      \"value\": \"2015-01-01\"\n    },\n    {\n      \"name\": \"end_date\",\n      \"value\": \"2015-12-31\"\n    }\n  ],\n  \"result\": [{\n    \"name\": \"output\",\n    \"value\": [{\n      \"cell_index\": \"[999, 384]\",\n      \"center_of_cell\": \"[[-83.37499999999666, 33.91666666666742]]\",\n      \"data\": [\n        [\n          \"date\",\n          \"ppt (mm)\"\n        ],\n        [\n          \"2015-01-01\",\n          0\n        ],\n        [\n          \"2015-01-02\",\n          1.46\n        ],\n        [\n          \"2015-01-03\",\n          15.35\n        ],\n        [\n          \"2015-01-04\",\n          17.16\n        ],\n        [\n          \"2015-01-05\",\n          12.98\n        ],\n        [\n          \"2015-01-06\",\n          0\n        ],\n        [\n          \"2015-01-07\",\n          0\n        ],\n        [\n          \"2015-01-08\",\n          0\n        ],\n        [\n          \"2015-01-09\",\n          0\n        ],\n        [\n          \"2015-01-10\",\n          0\n        ],\n        [\n          \"2015-01-11\",\n          0\n        ],\n        [\n          \"2015-01-12\",\n          3.99\n        ],\n        [\n          \"2015-01-13\",\n          1.19\n        ],\n        [\n          \"2015-01-14\",\n          1.62\n        ],\n        [\n          \"2015-01-15\",\n          0\n        ],\n        [\n          \"2015-01-16\",\n          2.86\n        ],\n        [\n          \"2015-01-17\",\n          0\n        ],\n        [\n          \"2015-01-18\",\n          0\n        ],\n        [\n          \"2015-01-19\",\n          0\n        ],\n        [\n          \"2015-01-20\",\n          0\n        ],\n        [\n          \"2015-01-21\",\n          0\n        ],\n        [\n          \"2015-01-22\",\n          0\n        ],\n        [\n          \"2015-01-23\",\n          7.17\n        ],\n        [\n          \"2015-01-24\",\n          16.37\n        ],\n        [\n          \"2015-01-25\",\n          0\n        ],\n        [\n          \"2015-01-26\",\n          0.13\n        ],\n        [\n          \"2015-01-27\",\n          0\n        ],\n        [\n          \"2015-01-28\",\n          0\n        ],\n        [\n          \"2015-01-29\",\n          0\n        ],\n        [\n          \"2015-01-30\",\n          0\n        ],\n        [\n          \"2015-01-31\",\n          0\n        ],\n        [\n          \"2015-02-01\",\n          0\n        ],\n        [\n          \"2015-02-02\",\n          16.7\n        ],\n        [\n          \"2015-02-03\",\n          0\n        ],\n        [\n          \"2015-02-04\",\n          0\n        ],\n        [\n          \"2015-02-05\",\n          0\n        ],\n        [\n          \"2015-02-06\",\n          0\n        ],\n        [\n          \"2015-02-07\",\n          0\n        ],\n        [\n          \"2015-02-08\",\n          0\n        ],\n        [\n          \"2015-02-09\",\n          0.45\n        ],\n        [\n          \"2015-02-10\",\n          12.75\n        ],\n        [\n          \"2015-02-11\",\n          0\n        ],\n        [\n          \"2015-02-12\",\n          0\n        ],\n        [\n          \"2015-02-13\",\n          0\n        ],\n        [\n          \"2015-02-14\",\n          0\n        ],\n        [\n          \"2015-02-15\",\n          0\n        ],\n        [\n          \"2015-02-16\",\n          0\n        ],\n        [\n          \"2015-02-17\",\n          30.79\n        ],\n        [\n          \"2015-02-18\",\n          0\n        ],\n        [\n          \"2015-02-19\",\n          0\n        ],\n        [\n          \"2015-02-20\",\n          0\n        ],\n        [\n          \"2015-02-21\",\n          0\n        ],\n        [\n          \"2015-02-22\",\n          16.82\n        ],\n        [\n          \"2015-02-23\",\n          10.52\n        ],\n        [\n          \"2015-02-24\",\n          1.81\n        ],\n        [\n          \"2015-02-25\",\n          2.63\n        ],\n        [\n          \"2015-02-26\",\n          17.07\n        ],\n        [\n          \"2015-02-27\",\n          0\n        ],\n        [\n          \"2015-02-28\",\n          0\n        ],\n        [\n          \"2015-03-01\",\n          2.77\n        ],\n        [\n          \"2015-03-02\",\n          6.12\n        ],\n        [\n          \"2015-03-03\",\n          0\n        ],\n        [\n          \"2015-03-04\",\n          5.04\n        ],\n        [\n          \"2015-03-05\",\n          0.61\n        ],\n        [\n          \"2015-03-06\",\n          3.34\n        ],\n        [\n          \"2015-03-07\",\n          0\n        ],\n        [\n          \"2015-03-08\",\n          0\n        ],\n        [\n          \"2015-03-09\",\n          0\n        ],\n        [\n          \"2015-03-10\",\n          0\n        ],\n        [\n          \"2015-03-11\",\n          0\n        ],\n        [\n          \"2015-03-12\",\n          0.39\n        ],\n        [\n          \"2015-03-13\",\n          0.75\n        ],\n        [\n          \"2015-03-14\",\n          15.78\n        ],\n        [\n          \"2015-03-15\",\n          0.69\n        ],\n        [\n          \"2015-03-16\",\n          0\n        ],\n        [\n          \"2015-03-17\",\n          0\n        ],\n        [\n          \"2015-03-18\",\n          0\n        ],\n        [\n          \"2015-03-19\",\n          8.78\n        ],\n        [\n          \"2015-03-20\",\n          13.59\n        ],\n        [\n          \"2015-03-21\",\n          0\n        ],\n        [\n          \"2015-03-22\",\n          2.21\n        ],\n        [\n          \"2015-03-23\",\n          16.39\n        ],\n        [\n          \"2015-03-24\",\n          0\n        ],\n        [\n          \"2015-03-25\",\n          0\n        ],\n        [\n          \"2015-03-26\",\n          0.67\n        ],\n        [\n          \"2015-03-27\",\n          0\n        ],\n        [\n          \"2015-03-28\",\n          0\n        ],\n        [\n          \"2015-03-29\",\n          0\n        ],\n        [\n          \"2015-03-30\",\n          4.23\n        ],\n        [\n          \"2015-03-31\",\n          1.54\n        ],\n        [\n          \"2015-04-01\",\n          0.25\n        ],\n        [\n          \"2015-04-02\",\n          0\n        ],\n        [\n          \"2015-04-03\",\n          3.81\n        ],\n        [\n          \"2015-04-04\",\n          5.81\n        ],\n        [\n          \"2015-04-05\",\n          0\n        ],\n        [\n          \"2015-04-06\",\n          0\n        ],\n        [\n          \"2015-04-07\",\n          13.75\n        ],\n        [\n          \"2015-04-08\",\n          0\n        ],\n        [\n          \"2015-04-09\",\n          0\n        ],\n        [\n          \"2015-04-10\",\n          0\n        ],\n        [\n          \"2015-04-11\",\n          8.87\n        ],\n        [\n          \"2015-04-12\",\n          0\n        ],\n        [\n          \"2015-04-13\",\n          0.85\n        ],\n        [\n          \"2015-04-14\",\n          44.98\n        ],\n        [\n          \"2015-04-15\",\n          2.89\n        ],\n        [\n          \"2015-04-16\",\n          33.07\n        ],\n        [\n          \"2015-04-17\",\n          1.02\n        ],\n        [\n          \"2015-04-18\",\n          22.27\n        ],\n        [\n          \"2015-04-19\",\n          7.81\n        ],\n        [\n          \"2015-04-20\",\n          31.28\n        ],\n        [\n          \"2015-04-21\",\n          3.73\n        ],\n        [\n          \"2015-04-22\",\n          0\n        ],\n        [\n          \"2015-04-23\",\n          0\n        ],\n        [\n          \"2015-04-24\",\n          0\n        ],\n        [\n          \"2015-04-25\",\n          6.52\n        ],\n        [\n          \"2015-04-26\",\n          7.95\n        ],\n        [\n          \"2015-04-27\",\n          0\n        ],\n        [\n          \"2015-04-28\",\n          0\n        ],\n        [\n          \"2015-04-29\",\n          8.46\n        ],\n        [\n          \"2015-04-30\",\n          10.28\n        ],\n        [\n          \"2015-05-01\",\n          0\n        ],\n        [\n          \"2015-05-02\",\n          0\n        ],\n        [\n          \"2015-05-03\",\n          0\n        ],\n        [\n          \"2015-05-04\",\n          0\n        ],\n        [\n          \"2015-05-05\",\n          0\n        ],\n        [\n          \"2015-05-06\",\n          0\n        ],\n        [\n          \"2015-05-07\",\n          0\n        ],\n        [\n          \"2015-05-08\",\n          0\n        ],\n        [\n          \"2015-05-09\",\n          0\n        ],\n        [\n          \"2015-05-10\",\n          0\n        ],\n        [\n          \"2015-05-11\",\n          0\n        ],\n        [\n          \"2015-05-12\",\n          0\n        ],\n        [\n          \"2015-05-13\",\n          0\n        ],\n        [\n          \"2015-05-14\",\n          0\n        ],\n        [\n          \"2015-05-15\",\n          0\n        ],\n        [\n          \"2015-05-16\",\n          0\n        ],\n        [\n          \"2015-05-17\",\n          0\n        ],\n        [\n          \"2015-05-18\",\n          0\n        ],\n        [\n          \"2015-05-19\",\n          3.8\n        ],\n        [\n          \"2015-05-20\",\n          0\n        ],\n        [\n          \"2015-05-21\",\n          0.65\n        ],\n        [\n          \"2015-05-22\",\n          0\n        ],\n        [\n          \"2015-05-23\",\n          0\n        ],\n        [\n          \"2015-05-24\",\n          0\n        ],\n        [\n          \"2015-05-25\",\n          0\n        ],\n        [\n          \"2015-05-26\",\n          3.17\n        ],\n        [\n          \"2015-05-27\",\n          18.25\n        ],\n        [\n          \"2015-05-28\",\n          0.25\n        ],\n        [\n          \"2015-05-29\",\n          3.23\n        ],\n        [\n          \"2015-05-30\",\n          0\n        ],\n        [\n          \"2015-05-31\",\n          0\n        ],\n        [\n          \"2015-06-01\",\n          8.94\n        ],\n        [\n          \"2015-06-02\",\n          5.55\n        ],\n        [\n          \"2015-06-03\",\n          22.01\n        ],\n        [\n          \"2015-06-04\",\n          14.77\n        ],\n        [\n          \"2015-06-05\",\n          0\n        ],\n        [\n          \"2015-06-06\",\n          0\n        ],\n        [\n          \"2015-06-07\",\n          0\n        ],\n        [\n          \"2015-06-08\",\n          0\n        ],\n        [\n          \"2015-06-09\",\n          2.56\n        ],\n        [\n          \"2015-06-10\",\n          10.57\n        ],\n        [\n          \"2015-06-11\",\n          0\n        ],\n        [\n          \"2015-06-12\",\n          2.73\n        ],\n        [\n          \"2015-06-13\",\n          0.03\n        ],\n        [\n          \"2015-06-14\",\n          0\n        ],\n        [\n          \"2015-06-15\",\n          0\n        ],\n        [\n          \"2015-06-16\",\n          0.05\n        ],\n        [\n          \"2015-06-17\",\n          0\n        ],\n        [\n          \"2015-06-18\",\n          0\n        ],\n        [\n          \"2015-06-19\",\n          4.77\n        ],\n        [\n          \"2015-06-20\",\n          0\n        ],\n        [\n          \"2015-06-21\",\n          7.94\n        ],\n        [\n          \"2015-06-22\",\n          0\n        ],\n        [\n          \"2015-06-23\",\n          0\n        ],\n        [\n          \"2015-06-24\",\n          0\n        ],\n        [\n          \"2015-06-25\",\n          0.36\n        ],\n        [\n          \"2015-06-26\",\n          0\n        ],\n        [\n          \"2015-06-27\",\n          0\n        ],\n        [\n          \"2015-06-28\",\n          12.88\n        ],\n        [\n          \"2015-06-29\",\n          0\n        ],\n        [\n          \"2015-06-30\",\n          0\n        ],\n        [\n          \"2015-07-01\",\n          20.84\n        ],\n        [\n          \"2015-07-02\",\n          8.92\n        ],\n        [\n          \"2015-07-03\",\n          32.74\n        ],\n        [\n          \"2015-07-04\",\n          32.64\n        ],\n        [\n          \"2015-07-05\",\n          5.23\n        ],\n        [\n          \"2015-07-06\",\n          0\n        ],\n        [\n          \"2015-07-07\",\n          0\n        ],\n        [\n          \"2015-07-08\",\n          0\n        ],\n        [\n          \"2015-07-09\",\n          0\n        ],\n        [\n          \"2015-07-10\",\n          0\n        ],\n        [\n          \"2015-07-11\",\n          0\n        ],\n        [\n          \"2015-07-12\",\n          0\n        ],\n        [\n          \"2015-07-13\",\n          0.4\n        ],\n        [\n          \"2015-07-14\",\n          0\n        ],\n        [\n          \"2015-07-15\",\n          27.08\n        ],\n        [\n          \"2015-07-16\",\n          0\n        ],\n        [\n          \"2015-07-17\",\n          0\n        ],\n        [\n          \"2015-07-18\",\n          0\n        ],\n        [\n          \"2015-07-19\",\n          0\n        ],\n        [\n          \"2015-07-20\",\n          0\n        ],\n        [\n          \"2015-07-21\",\n          2.66\n        ],\n        [\n          \"2015-07-22\",\n          6.43\n        ],\n        [\n          \"2015-07-23\",\n          0\n        ],\n        [\n          \"2015-07-24\",\n          0.99\n        ],\n        [\n          \"2015-07-25\",\n          0\n        ],\n        [\n          \"2015-07-26\",\n          0\n        ],\n        [\n          \"2015-07-27\",\n          0\n        ],\n        [\n          \"2015-07-28\",\n          0\n        ],\n        [\n          \"2015-07-29\",\n          0\n        ],\n        [\n          \"2015-07-30\",\n          0\n        ],\n        [\n          \"2015-07-31\",\n          0\n        ],\n        [\n          \"2015-08-01\",\n          0\n        ],\n        [\n          \"2015-08-02\",\n          0.53\n        ],\n        [\n          \"2015-08-03\",\n          0\n        ],\n        [\n          \"2015-08-04\",\n          0\n        ],\n        [\n          \"2015-08-05\",\n          0\n        ],\n        [\n          \"2015-08-06\",\n          0\n        ],\n        [\n          \"2015-08-07\",\n          19.63\n        ],\n        [\n          \"2015-08-08\",\n          0\n        ],\n        [\n          \"2015-08-09\",\n          0\n        ],\n        [\n          \"2015-08-10\",\n          0\n        ],\n        [\n          \"2015-08-11\",\n          53.13\n        ],\n        [\n          \"2015-08-12\",\n          0.88\n        ],\n        [\n          \"2015-08-13\",\n          0\n        ],\n        [\n          \"2015-08-14\",\n          0\n        ],\n        [\n          \"2015-08-15\",\n          0\n        ],\n        [\n          \"2015-08-16\",\n          0\n        ],\n        [\n          \"2015-08-17\",\n          0.05\n        ],\n        [\n          \"2015-08-18\",\n          49.36\n        ],\n        [\n          \"2015-08-19\",\n          11.53\n        ],\n        [\n          \"2015-08-20\",\n          29.77\n        ],\n        [\n          \"2015-08-21\",\n          0.52\n        ],\n        [\n          \"2015-08-22\",\n          0.45\n        ],\n        [\n          \"2015-08-23\",\n          5.85\n        ],\n        [\n          \"2015-08-24\",\n          10.25\n        ],\n        [\n          \"2015-08-25\",\n          0\n        ],\n        [\n          \"2015-08-26\",\n          0\n        ],\n        [\n          \"2015-08-27\",\n          0\n        ],\n        [\n          \"2015-08-28\",\n          0\n        ],\n        [\n          \"2015-08-29\",\n          0\n        ],\n        [\n          \"2015-08-30\",\n          0\n        ],\n        [\n          \"2015-08-31\",\n          11.74\n        ],\n        [\n          \"2015-09-01\",\n          0\n        ],\n        [\n          \"2015-09-02\",\n          0\n        ],\n        [\n          \"2015-09-03\",\n          0\n        ],\n        [\n          \"2015-09-04\",\n          0\n        ],\n        [\n          \"2015-09-05\",\n          1.02\n        ],\n        [\n          \"2015-09-06\",\n          4.62\n        ],\n        [\n          \"2015-09-07\",\n          0\n        ],\n        [\n          \"2015-09-08\",\n          0\n        ],\n        [\n          \"2015-09-09\",\n          17.53\n        ],\n        [\n          \"2015-09-10\",\n          20.18\n        ],\n        [\n          \"2015-09-11\",\n          11.44\n        ],\n        [\n          \"2015-09-12\",\n          0\n        ],\n        [\n          \"2015-09-13\",\n          0\n        ],\n        [\n          \"2015-09-14\",\n          0\n        ],\n        [\n          \"2015-09-15\",\n          0\n        ],\n        [\n          \"2015-09-16\",\n          0\n        ],\n        [\n          \"2015-09-17\",\n          0\n        ],\n        [\n          \"2015-09-18\",\n          0\n        ],\n        [\n          \"2015-09-19\",\n          0\n        ],\n        [\n          \"2015-09-20\",\n          0\n        ],\n        [\n          \"2015-09-21\",\n          0\n        ],\n        [\n          \"2015-09-22\",\n          0.04\n        ],\n        [\n          \"2015-09-23\",\n          0\n        ],\n        [\n          \"2015-09-24\",\n          0\n        ],\n        [\n          \"2015-09-25\",\n          37.71\n        ],\n        [\n          \"2015-09-26\",\n          5.51\n        ],\n        [\n          \"2015-09-27\",\n          2.36\n        ],\n        [\n          \"2015-09-28\",\n          0.58\n        ],\n        [\n          \"2015-09-29\",\n          6.44\n        ],\n        [\n          \"2015-09-30\",\n          6.53\n        ],\n        [\n          \"2015-10-01\",\n          1.11\n        ],\n        [\n          \"2015-10-02\",\n          15.44\n        ],\n        [\n          \"2015-10-03\",\n          10.35\n        ],\n        [\n          \"2015-10-04\",\n          55.18\n        ],\n        [\n          \"2015-10-05\",\n          0.35\n        ],\n        [\n          \"2015-10-06\",\n          3.58\n        ],\n        [\n          \"2015-10-07\",\n          0\n        ],\n        [\n          \"2015-10-08\",\n          0\n        ],\n        [\n          \"2015-10-09\",\n          0\n        ],\n        [\n          \"2015-10-10\",\n          19.89\n        ],\n        [\n          \"2015-10-11\",\n          12.06\n        ],\n        [\n          \"2015-10-12\",\n          0\n        ],\n        [\n          \"2015-10-13\",\n          4.74\n        ],\n        [\n          \"2015-10-14\",\n          0\n        ],\n        [\n          \"2015-10-15\",\n          0\n        ],\n        [\n          \"2015-10-16\",\n          0\n        ],\n        [\n          \"2015-10-17\",\n          0\n        ],\n        [\n          \"2015-10-18\",\n          0\n        ],\n        [\n          \"2015-10-19\",\n          0\n        ],\n        [\n          \"2015-10-20\",\n          0\n        ],\n        [\n          \"2015-10-21\",\n          0\n        ],\n        [\n          \"2015-10-22\",\n          0\n        ],\n        [\n          \"2015-10-23\",\n          0\n        ],\n        [\n          \"2015-10-24\",\n          0\n        ],\n        [\n          \"2015-10-25\",\n          0\n        ],\n        [\n          \"2015-10-26\",\n          2.59\n        ],\n        [\n          \"2015-10-27\",\n          14.49\n        ],\n        [\n          \"2015-10-28\",\n          9.41\n        ],\n        [\n          \"2015-10-29\",\n          2.87\n        ],\n        [\n          \"2015-10-30\",\n          0\n        ],\n        [\n          \"2015-10-31\",\n          0\n        ],\n        [\n          \"2015-11-01\",\n          18.41\n        ],\n        [\n          \"2015-11-02\",\n          42.65\n        ],\n        [\n          \"2015-11-03\",\n          28.66\n        ],\n        [\n          \"2015-11-04\",\n          1.21\n        ],\n        [\n          \"2015-11-05\",\n          1.48\n        ],\n        [\n          \"2015-11-06\",\n          8.78\n        ],\n        [\n          \"2015-11-07\",\n          20.47\n        ],\n        [\n          \"2015-11-08\",\n          27.51\n        ],\n        [\n          \"2015-11-09\",\n          39.31\n        ],\n        [\n          \"2015-11-10\",\n          4.64\n        ],\n        [\n          \"2015-11-11\",\n          0\n        ],\n        [\n          \"2015-11-12\",\n          0\n        ],\n        [\n          \"2015-11-13\",\n          0\n        ],\n        [\n          \"2015-11-14\",\n          0\n        ],\n        [\n          \"2015-11-15\",\n          0\n        ],\n        [\n          \"2015-11-16\",\n          0\n        ],\n        [\n          \"2015-11-17\",\n          0\n        ],\n        [\n          \"2015-11-18\",\n          4.74\n        ],\n        [\n          \"2015-11-19\",\n          44.68\n        ],\n        [\n          \"2015-11-20\",\n          0\n        ],\n        [\n          \"2015-11-21\",\n          0\n        ],\n        [\n          \"2015-11-22\",\n          0\n        ],\n        [\n          \"2015-11-23\",\n          0\n        ],\n        [\n          \"2015-11-24\",\n          0\n        ],\n        [\n          \"2015-11-25\",\n          0\n        ],\n        [\n          \"2015-11-26\",\n          0\n        ],\n        [\n          \"2015-11-27\",\n          0\n        ],\n        [\n          \"2015-11-28\",\n          0\n        ],\n        [\n          \"2015-11-29\",\n          0\n        ],\n        [\n          \"2015-11-30\",\n          0\n        ],\n        [\n          \"2015-12-01\",\n          0\n        ],\n        [\n          \"2015-12-02\",\n          1.02\n        ],\n        [\n          \"2015-12-03\",\n          0.67\n        ],\n        [\n          \"2015-12-04\",\n          0\n        ],\n        [\n          \"2015-12-05\",\n          0\n        ],\n        [\n          \"2015-12-06\",\n          0\n        ],\n        [\n          \"2015-12-07\",\n          0\n        ],\n        [\n          \"2015-12-08\",\n          0\n        ],\n        [\n          \"2015-12-09\",\n          0\n        ],\n        [\n          \"2015-12-10\",\n          0\n        ],\n        [\n          \"2015-12-11\",\n          0\n        ],\n        [\n          \"2015-12-12\",\n          0\n        ],\n        [\n          \"2015-12-13\",\n          0\n        ],\n        [\n          \"2015-12-14\",\n          0.95\n        ],\n        [\n          \"2015-12-15\",\n          2.89\n        ],\n        [\n          \"2015-12-16\",\n          0\n        ],\n        [\n          \"2015-12-17\",\n          46.82\n        ],\n        [\n          \"2015-12-18\",\n          12.78\n        ],\n        [\n          \"2015-12-19\",\n          0\n        ],\n        [\n          \"2015-12-20\",\n          0\n        ],\n        [\n          \"2015-12-21\",\n          0\n        ],\n        [\n          \"2015-12-22\",\n          50.66\n        ],\n        [\n          \"2015-12-23\",\n          4.73\n        ],\n        [\n          \"2015-12-24\",\n          47.42\n        ],\n        [\n          \"2015-12-25\",\n          32.87\n        ],\n        [\n          \"2015-12-26\",\n          6.33\n        ],\n        [\n          \"2015-12-27\",\n          0.28\n        ],\n        [\n          \"2015-12-28\",\n          3.35\n        ],\n        [\n          \"2015-12-29\",\n          36.11\n        ],\n        [\n          \"2015-12-30\",\n          9.5\n        ],\n        [\n          \"2015-12-31\",\n          66.82\n        ]\n      ],\n      \"name\": \"pt one\"\n    }]\n  }]\n}";
            // string data = "{\"metainfo\":{\"status\":\"Finished\",\"suid\":\"2c62fc71-4685-11e9-833b-d11a951b18d0\",\"cloud_node\":\"10.40.1.33\",\"request_ip\":\"13.92.103.184\",\"service_url\":\"http://csip.engr.colostate.edu:8083/csip-climate/m/prism/1.0\",\"tstamp\":\"2019-03-1412:15:40\",\"cpu_time\":32,\"expiration_date\":\"2019-03-1412:16:10\"},\"parameter\":[{\"name\":\"input_zone_features\",\"value\":{\"type\":\"FeatureCollection\",\"features\":[{\"type\":\"Feature\",\"properties\":{\"name\":\"ptone\",\"gid\":1},\"geometry\":{\"type\":\"Point\",\"coordinates\":[-83.356893,33.925575],\"crs\":{\"type\":\"name\",\"properties\":{\"name\":\"EPSG:4326\"}}}}]}},{\"name\":\"units\",\"value\":\"metric\"},{\"name\":\"climate_data\",\"value\":[\"ppt\"]},{\"name\":\"start_date\",\"value\":\"2010-01-01\"},{\"name\":\"end_date\",\"value\":\"2013-12-31\"}],\"result\":[{\"name\":\"output\",\"value\":[{\"cell_index\":\"[999,384]\",\"center_of_cell\":\"[[-83.37499999999666,33.91666666666742]]\",\"data\":[[\"date\",\"ppt(mm)\"],[\"2010-01-01\",1.3],[\"2010-01-02\",0],[\"2010-01-03\",0],[\"2010-01-04\",0],[\"2010-01-05\",0],[\"2010-01-06\",0],[\"2010-01-07\",0],[\"2010-01-08\",0.39],[\"2010-01-09\",0],[\"2010-01-10\",0],[\"2010-01-11\",0],[\"2010-01-12\",0],[\"2010-01-13\",0],[\"2010-01-14\",0],[\"2010-01-15\",0],[\"2010-01-16\",0],[\"2010-01-17\",54.81],[\"2010-01-18\",2.46],[\"2010-01-19\",0],[\"2010-01-20\",0],[\"2010-01-21\",1.76],[\"2010-01-22\",25.44],[\"2010-01-23\",0],[\"2010-01-24\",1.83],[\"2010-01-25\",51.25],[\"2010-01-26\",0],[\"2010-01-27\",0],[\"2010-01-28\",0],[\"2010-01-29\",0],[\"2010-01-30\",12.63],[\"2010-01-31\",0.52],[\"2010-02-01\",0],[\"2010-02-02\",8.37],[\"2010-02-03\",3.74],[\"2010-02-04\",0],[\"2010-02-05\",44.77],[\"2010-02-06\",29.93],[\"2010-02-07\",0],[\"2010-02-08\",0],[\"2010-02-09\",0],[\"2010-02-10\",2.48],[\"2010-02-11\",0],[\"2010-02-12\",0],[\"2010-02-13\",10.16],[\"2010-02-14\",0],[\"2010-02-15\",1.46],[\"2010-02-16\",2.29],[\"2010-02-17\",0],[\"2010-02-18\",0],[\"2010-02-19\",0],[\"2010-02-20\",0],[\"2010-02-21\",0],[\"2010-02-22\",11.23],[\"2010-02-23\",0.44],[\"2010-02-24\",0],[\"2010-02-25\",0.28],[\"2010-02-26\",0],[\"2010-02-27\",0],[\"2010-02-28\",0],[\"2010-03-01\",0],[\"2010-03-02\",0.54],[\"2010-03-03\",11.04],[\"2010-03-04\",0],[\"2010-03-05\",0],[\"2010-03-06\",0],[\"2010-03-07\",0],[\"2010-03-08\",0],[\"2010-03-09\",0],[\"2010-03-10\",0.57],[\"2010-03-11\",25.71],[\"2010-03-12\",6.74],[\"2010-03-13\",7.82],[\"2010-03-14\",0.55],[\"2010-03-15\",0],[\"2010-03-16\",0],[\"2010-03-17\",0],[\"2010-03-18\",3.06],[\"2010-03-19\",0],[\"2010-03-20\",0],[\"2010-03-21\",0],[\"2010-03-22\",5.19],[\"2010-03-23\",1.35],[\"2010-03-24\",0],[\"2010-03-25\",0],[\"2010-03-26\",2.13],[\"2010-03-27\",0],[\"2010-03-28\",0],[\"2010-03-29\",1.47],[\"2010-03-30\",0],[\"2010-03-31\",0],[\"2010-04-01\",0],[\"2010-04-02\",0],[\"2010-04-03\",0],[\"2010-04-04\",0],[\"2010-04-05\",0],[\"2010-04-06\",0],[\"2010-04-07\",0],[\"2010-04-08\",0],[\"2010-04-09\",13.16],[\"2010-04-10\",0],[\"2010-04-11\",0],[\"2010-04-12\",0],[\"2010-04-13\",0],[\"2010-04-14\",0],[\"2010-04-15\",0],[\"2010-04-16\",0],[\"2010-04-17\",0],[\"2010-04-18\",0],[\"2010-04-19\",0],[\"2010-04-20\",0],[\"2010-04-21\",1.06],[\"2010-04-22\",0],[\"2010-04-23\",0],[\"2010-04-24\",2.05],[\"2010-04-25\",29.08],[\"2010-04-26\",0],[\"2010-04-27\",0],[\"2010-04-28\",1.13],[\"2010-04-29\",0],[\"2010-04-30\",0],[\"2010-05-01\",0],[\"2010-05-02\",0.14],[\"2010-05-03\",12.49],[\"2010-05-04\",66.49],[\"2010-05-05\",0],[\"2010-05-06\",0],[\"2010-05-07\",0],[\"2010-05-08\",0],[\"2010-05-09\",0],[\"2010-05-10\",0],[\"2010-05-11\",3.05],[\"2010-05-12\",0],[\"2010-05-13\",0],[\"2010-05-14\",0],[\"2010-05-15\",0],[\"2010-05-16\",0],[\"2010-05-17\",0.7],[\"2010-05-18\",1.48],[\"2010-05-19\",0],[\"2010-05-20\",0],[\"2010-05-21\",1.01],[\"2010-05-22\",27.13],[\"2010-05-23\",0],[\"2010-05-24\",0],[\"2010-05-25\",0],[\"2010-05-26\",0],[\"2010-05-27\",0],[\"2010-05-28\",0],[\"2010-05-29\",3.51],[\"2010-05-30\",0.89],[\"2010-05-31\",4.66],[\"2010-06-01\",8.97],[\"2010-06-02\",0],[\"2010-06-03\",31.57],[\"2010-06-04\",0],[\"2010-06-05\",0.46],[\"2010-06-06\",0],[\"2010-06-07\",7.66],[\"2010-06-08\",0],[\"2010-06-09\",0],[\"2010-06-10\",4.23],[\"2010-06-11\",10.89],[\"2010-06-12\",0],[\"2010-06-13\",0.07],[\"2010-06-14\",0],[\"2010-06-15\",0],[\"2010-06-16\",31.37],[\"2010-06-17\",4.82],[\"2010-06-18\",0],[\"2010-06-19\",0],[\"2010-06-20\",0],[\"2010-06-21\",0],[\"2010-06-22\",0],[\"2010-06-23\",0],[\"2010-06-24\",0],[\"2010-06-25\",0],[\"2010-06-26\",21.33],[\"2010-06-27\",0],[\"2010-06-28\",0],[\"2010-06-29\",0.72],[\"2010-06-30\",15.63],[\"2010-07-01\",4.66],[\"2010-07-02\",0],[\"2010-07-03\",0],[\"2010-07-04\",0],[\"2010-07-05\",0],[\"2010-07-06\",0],[\"2010-07-07\",0],[\"2010-07-08\",0],[\"2010-07-09\",0],[\"2010-07-10\",0],[\"2010-07-11\",0],[\"2010-07-12\",12.33],[\"2010-07-13\",20.78],[\"2010-07-14\",9.04],[\"2010-07-15\",0],[\"2010-07-16\",0.12],[\"2010-07-17\",0.8],[\"2010-07-18\",0],[\"2010-07-19\",3.01],[\"2010-07-20\",0],[\"2010-07-21\",0],[\"2010-07-22\",1.87],[\"2010-07-23\",0],[\"2010-07-24\",14.11],[\"2010-07-25\",0],[\"2010-07-26\",0],[\"2010-07-27\",18.2],[\"2010-07-28\",0],[\"2010-07-29\",0],[\"2010-07-30\",0],[\"2010-07-31\",0],[\"2010-08-01\",4.33],[\"2010-08-02\",3.54],[\"2010-08-03\",0],[\"2010-08-04\",55.73],[\"2010-08-05\",0],[\"2010-08-06\",3.04],[\"2010-08-07\",16.14],[\"2010-08-08\",0],[\"2010-08-09\",0.54],[\"2010-08-10\",12.72],[\"2010-08-11\",0],[\"2010-08-12\",0],[\"2010-08-13\",0],[\"2010-08-14\",4.02],[\"2010-08-15\",13.22],[\"2010-08-16\",0.54],[\"2010-08-17\",46.66],[\"2010-08-18\",1.16],[\"2010-08-19\",0],[\"2010-08-20\",14.4],[\"2010-08-21\",9.35],[\"2010-08-22\",18.57],[\"2010-08-23\",11.07],[\"2010-08-24\",0],[\"2010-08-25\",0],[\"2010-08-26\",0],[\"2010-08-27\",8.38],[\"2010-08-28\",0],[\"2010-08-29\",0.26],[\"2010-08-30\",0],[\"2010-08-31\",0],[\"2010-09-01\",0],[\"2010-09-02\",0],[\"2010-09-03\",0],[\"2010-09-04\",0],[\"2010-09-05\",0],[\"2010-09-06\",0],[\"2010-09-07\",0],[\"2010-09-08\",0],[\"2010-09-09\",0],[\"2010-09-10\",0],[\"2010-09-11\",0],[\"2010-09-12\",15.83],[\"2010-09-13\",0],[\"2010-09-14\",0],[\"2010-09-15\",0],[\"2010-09-16\",0],[\"2010-09-17\",0],[\"2010-09-18\",0],[\"2010-09-19\",0],[\"2010-09-20\",0],[\"2010-09-21\",0],[\"2010-09-22\",0],[\"2010-09-23\",0],[\"2010-09-24\",0],[\"2010-09-25\",0],[\"2010-09-26\",3.03],[\"2010-09-27\",66.58],[\"2010-09-28\",16.74],[\"2010-09-29\",0],[\"2010-09-30\",38.45],[\"2010-10-01\",0],[\"2010-10-02\",0],[\"2010-10-03\",0],[\"2010-10-04\",0],[\"2010-10-05\",0],[\"2010-10-06\",0],[\"2010-10-07\",0],[\"2010-10-08\",0],[\"2010-10-09\",0],[\"2010-10-10\",0],[\"2010-10-11\",0],[\"2010-10-12\",0],[\"2010-10-13\",0],[\"2010-10-14\",0.15],[\"2010-10-15\",0],[\"2010-10-16\",0],[\"2010-10-17\",0],[\"2010-10-18\",0],[\"2010-10-19\",0],[\"2010-10-20\",1.36],[\"2010-10-21\",0.38],[\"2010-10-22\",0],[\"2010-10-23\",0],[\"2010-10-24\",0],[\"2010-10-25\",0],[\"2010-10-26\",13.05],[\"2010-10-27\",0],[\"2010-10-28\",35.42],[\"2010-10-29\",0],[\"2010-10-30\",0],[\"2010-10-31\",0],[\"2010-11-01\",0],[\"2010-11-02\",0],[\"2010-11-03\",2.36],[\"2010-11-04\",28.2],[\"2010-11-05\",1.03],[\"2010-11-06\",0],[\"2010-11-07\",0],[\"2010-11-08\",0],[\"2010-11-09\",0],[\"2010-11-10\",0],[\"2010-11-11\",0],[\"2010-11-12\",0],[\"2010-11-13\",0],[\"2010-11-14\",0],[\"2010-11-15\",3.65],[\"2010-11-16\",5.84],[\"2010-11-17\",2],[\"2010-11-18\",0],[\"2010-11-19\",0],[\"2010-11-20\",0],[\"2010-11-21\",0],[\"2010-11-22\",0],[\"2010-11-23\",0],[\"2010-11-24\",2.34],[\"2010-11-25\",0.73],[\"2010-11-26\",1.62],[\"2010-11-27\",3.36],[\"2010-11-28\",0],[\"2010-11-29\",0],[\"2010-11-30\",17.34],[\"2010-12-01\",56.25],[\"2010-12-02\",0],[\"2010-12-03\",0],[\"2010-12-04\",0],[\"2010-12-05\",0.63],[\"2010-12-06\",0],[\"2010-12-07\",0],[\"2010-12-08\",0],[\"2010-12-09\",0],[\"2010-12-10\",0],[\"2010-12-11\",0],[\"2010-12-12\",17.48],[\"2010-12-13\",0],[\"2010-12-14\",0],[\"2010-12-15\",0],[\"2010-12-16\",0.72],[\"2010-12-17\",7.94],[\"2010-12-18\",0.15],[\"2010-12-19\",6.39],[\"2010-12-20\",0],[\"2010-12-21\",0],[\"2010-12-22\",0.79],[\"2010-12-23\",0],[\"2010-12-24\",0],[\"2010-12-25\",0],[\"2010-12-26\",13.14],[\"2010-12-27\",1.24],[\"2010-12-28\",0],[\"2010-12-29\",0],[\"2010-12-30\",0],[\"2010-12-31\",0],[\"2011-01-01\",0],[\"2011-01-02\",24.28],[\"2011-01-03\",0],[\"2011-01-04\",0],[\"2011-01-05\",0],[\"2011-01-06\",7.39],[\"2011-01-07\",0],[\"2011-01-08\",0.02],[\"2011-01-09\",0],[\"2011-01-10\",16.39],[\"2011-01-11\",5.85],[\"2011-01-12\",0],[\"2011-01-13\",0],[\"2011-01-14\",0],[\"2011-01-15\",0],[\"2011-01-16\",0],[\"2011-01-17\",0],[\"2011-01-18\",4.06],[\"2011-01-19\",0.4],[\"2011-01-20\",0],[\"2011-01-21\",0],[\"2011-01-22\",0],[\"2011-01-23\",0],[\"2011-01-24\",0],[\"2011-01-25\",0.35],[\"2011-01-26\",23.93],[\"2011-01-27\",0],[\"2011-01-28\",0],[\"2011-01-29\",0],[\"2011-01-30\",0],[\"2011-01-31\",0],[\"2011-02-01\",5.91],[\"2011-02-02\",31.55],[\"2011-02-03\",0],[\"2011-02-04\",7.56],[\"2011-02-05\",42.98],[\"2011-02-06\",0],[\"2011-02-07\",0],[\"2011-02-08\",1.69],[\"2011-02-09\",0],[\"2011-02-10\",6.21],[\"2011-02-11\",0],[\"2011-02-12\",0],[\"2011-02-13\",0],[\"2011-02-14\",0],[\"2011-02-15\",0],[\"2011-02-16\",0],[\"2011-02-17\",0],[\"2011-02-18\",0],[\"2011-02-19\",0],[\"2011-02-20\",0],[\"2011-02-21\",0],[\"2011-02-22\",0],[\"2011-02-23\",0],[\"2011-02-24\",0],[\"2011-02-25\",6.3],[\"2011-02-26\",0],[\"2011-02-27\",0],[\"2011-02-28\",0],[\"2011-03-01\",25.03],[\"2011-03-02\",0],[\"2011-03-03\",0],[\"2011-03-04\",0.37],[\"2011-03-05\",4.65],[\"2011-03-06\",22.21],[\"2011-03-07\",2.84],[\"2011-03-08\",0],[\"2011-03-09\",0],[\"2011-03-10\",33.81],[\"2011-03-11\",0.22],[\"2011-03-12\",0],[\"2011-03-13\",0],[\"2011-03-14\",0],[\"2011-03-15\",9.09],[\"2011-03-16\",18.98],[\"2011-03-17\",0],[\"2011-03-18\",0],[\"2011-03-19\",0],[\"2011-03-20\",0],[\"2011-03-21\",0],[\"2011-03-22\",0],[\"2011-03-23\",0],[\"2011-03-24\",1.26],[\"2011-03-25\",0],[\"2011-03-26\",0],[\"2011-03-27\",43.6],[\"2011-03-28\",32.9],[\"2011-03-29\",6.95],[\"2011-03-30\",12.65],[\"2011-03-31\",3.76],[\"2011-04-01\",0.44],[\"2011-04-02\",0],[\"2011-04-03\",0],[\"2011-04-04\",0],[\"2011-04-05\",22.41],[\"2011-04-06\",0],[\"2011-04-07\",0],[\"2011-04-08\",0],[\"2011-04-09\",0],[\"2011-04-10\",0],[\"2011-04-11\",0],[\"2011-04-12\",2.1],[\"2011-04-13\",0],[\"2011-04-14\",0],[\"2011-04-15\",0],[\"2011-04-16\",10.26],[\"2011-04-17\",0.52],[\"2011-04-18\",0],[\"2011-04-19\",0],[\"2011-04-20\",0],[\"2011-04-21\",0],[\"2011-04-22\",23.49],[\"2011-04-23\",0.58],[\"2011-04-24\",0],[\"2011-04-25\",0],[\"2011-04-26\",0],[\"2011-04-27\",0],[\"2011-04-28\",10.65],[\"2011-04-29\",0],[\"2011-04-30\",0],[\"2011-05-01\",0],[\"2011-05-02\",0],[\"2011-05-03\",0],[\"2011-05-04\",3.75],[\"2011-05-05\",0],[\"2011-05-06\",0],[\"2011-05-07\",0],[\"2011-05-08\",0],[\"2011-05-09\",0],[\"2011-05-10\",0],[\"2011-05-11\",0],[\"2011-05-12\",0],[\"2011-05-13\",0],[\"2011-05-14\",0.58],[\"2011-05-15\",0],[\"2011-05-16\",0],[\"2011-05-17\",0.56],[\"2011-05-18\",0],[\"2011-05-19\",0],[\"2011-05-20\",0],[\"2011-05-21\",0],[\"2011-05-22\",0],[\"2011-05-23\",0],[\"2011-05-24\",0],[\"2011-05-25\",0],[\"2011-05-26\",0],[\"2011-05-27\",20.09],[\"2011-05-28\",0.05],[\"2011-05-29\",0],[\"2011-05-30\",0],[\"2011-05-31\",0],[\"2011-06-01\",0],[\"2011-06-02\",0],[\"2011-06-03\",0],[\"2011-06-04\",0],[\"2011-06-05\",0],[\"2011-06-06\",0],[\"2011-06-07\",0],[\"2011-06-08\",0],[\"2011-06-09\",1.1],[\"2011-06-10\",7.64],[\"2011-06-11\",1.04],[\"2011-06-12\",4.72],[\"2011-06-13\",0],[\"2011-06-14\",0],[\"2011-06-15\",0],[\"2011-06-16\",34.29],[\"2011-06-17\",0],[\"2011-06-18\",0.87],[\"2011-06-19\",8.29],[\"2011-06-20\",0],[\"2011-06-21\",0],[\"2011-06-22\",0.02],[\"2011-06-23\",8.05],[\"2011-06-24\",0.61],[\"2011-06-25\",12.32],[\"2011-06-26\",0],[\"2011-06-27\",21.7],[\"2011-06-28\",0],[\"2011-06-29\",0],[\"2011-06-30\",0],[\"2011-07-01\",0],[\"2011-07-02\",0],[\"2011-07-03\",0],[\"2011-07-04\",0.81],[\"2011-07-05\",3.34],[\"2011-07-06\",0.79],[\"2011-07-07\",5.81],[\"2011-07-08\",0.02],[\"2011-07-09\",0.6],[\"2011-07-10\",2.77],[\"2011-07-11\",0],[\"2011-07-12\",0],[\"2011-07-13\",0.95],[\"2011-07-14\",8.37],[\"2011-07-15\",10.7],[\"2011-07-16\",0],[\"2011-07-17\",0],[\"2011-07-18\",0],[\"2011-07-19\",14.19],[\"2011-07-20\",0],[\"2011-07-21\",8.74],[\"2011-07-22\",0],[\"2011-07-23\",0],[\"2011-07-24\",0],[\"2011-07-25\",0],[\"2011-07-26\",4.24],[\"2011-07-27\",0.1],[\"2011-07-28\",0],[\"2011-07-29\",0],[\"2011-07-30\",0],[\"2011-07-31\",0.85],[\"2011-08-01\",5.36],[\"2011-08-02\",0],[\"2011-08-03\",0],[\"2011-08-04\",0],[\"2011-08-05\",0],[\"2011-08-06\",7.67],[\"2011-08-07\",17.35],[\"2011-08-08\",2.5],[\"2011-08-09\",0],[\"2011-08-10\",0],[\"2011-08-11\",0],[\"2011-08-12\",0],[\"2011-08-13\",11.45],[\"2011-08-14\",0.55],[\"2011-08-15\",0],[\"2011-08-16\",0],[\"2011-08-17\",0],[\"2011-08-18\",0],[\"2011-08-19\",3.41],[\"2011-08-20\",0],[\"2011-08-21\",15.74],[\"2011-08-22\",0],[\"2011-08-23\",0],[\"2011-08-24\",0],[\"2011-08-25\",0],[\"2011-08-26\",0],[\"2011-08-27\",0],[\"2011-08-28\",0],[\"2011-08-29\",0],[\"2011-08-30\",0],[\"2011-08-31\",0],[\"2011-09-01\",0],[\"2011-09-02\",0],[\"2011-09-03\",0],[\"2011-09-04\",0],[\"2011-09-05\",1.62],[\"2011-09-06\",10.44],[\"2011-09-07\",0.34],[\"2011-09-08\",0],[\"2011-09-09\",0],[\"2011-09-10\",0],[\"2011-09-11\",0],[\"2011-09-12\",0],[\"2011-09-13\",0],[\"2011-09-14\",0],[\"2011-09-15\",0],[\"2011-09-16\",0.01],[\"2011-09-17\",0],[\"2011-09-18\",0],[\"2011-09-19\",0],[\"2011-09-20\",0],[\"2011-09-21\",4.49],[\"2011-09-22\",2.28],[\"2011-09-23\",15.17],[\"2011-09-24\",0],[\"2011-09-25\",0],[\"2011-09-26\",0],[\"2011-09-27\",0],[\"2011-09-28\",0.69],[\"2011-09-29\",0],[\"2011-09-30\",0],[\"2011-10-01\",0],[\"2011-10-02\",0],[\"2011-10-03\",0],[\"2011-10-04\",0],[\"2011-10-05\",0],[\"2011-10-06\",0],[\"2011-10-07\",0],[\"2011-10-08\",0],[\"2011-10-09\",0],[\"2011-10-10\",0],[\"2011-10-11\",38.36],[\"2011-10-12\",34.78],[\"2011-10-13\",0.34],[\"2011-10-14\",1.59],[\"2011-10-15\",0],[\"2011-10-16\",0],[\"2011-10-17\",0],[\"2011-10-18\",0],[\"2011-10-19\",38.1],[\"2011-10-20\",3.86],[\"2011-10-21\",0],[\"2011-10-22\",0],[\"2011-10-23\",0],[\"2011-10-24\",0],[\"2011-10-25\",0],[\"2011-10-26\",0],[\"2011-10-27\",0],[\"2011-10-28\",0],[\"2011-10-29\",4.22],[\"2011-10-30\",0],[\"2011-10-31\",0],[\"2011-11-01\",0],[\"2011-11-02\",0],[\"2011-11-03\",0],[\"2011-11-04\",14.92],[\"2011-11-05\",0],[\"2011-11-06\",0],[\"2011-11-07\",0],[\"2011-11-08\",0],[\"2011-11-09\",0],[\"2011-11-10\",2.27],[\"2011-11-11\",0],[\"2011-11-12\",0],[\"2011-11-13\",0],[\"2011-11-14\",0],[\"2011-11-15\",0],[\"2011-11-16\",5.39],[\"2011-11-17\",2.18],[\"2011-11-18\",0],[\"2011-11-19\",0],[\"2011-11-20\",0.45],[\"2011-11-21\",0],[\"2011-11-22\",0],[\"2011-11-23\",18.47],[\"2011-11-24\",0],[\"2011-11-25\",0],[\"2011-11-26\",0],[\"2011-11-27\",0],[\"2011-11-28\",10.81],[\"2011-11-29\",19.63],[\"2011-11-30\",1.07],[\"2011-12-01\",0],[\"2011-12-02\",0],[\"2011-12-03\",0],[\"2011-12-04\",0],[\"2011-12-05\",0],[\"2011-12-06\",0],[\"2011-12-07\",7.79],[\"2011-12-08\",4.01],[\"2011-12-09\",0],[\"2011-12-10\",0],[\"2011-12-11\",0],[\"2011-12-12\",0],[\"2011-12-13\",0],[\"2011-12-14\",0],[\"2011-12-15\",0],[\"2011-12-16\",0],[\"2011-12-17\",0],[\"2011-12-18\",0],[\"2011-12-19\",0],[\"2011-12-20\",0],[\"2011-12-21\",17.45],[\"2011-12-22\",10.75],[\"2011-12-23\",21.6],[\"2011-12-24\",0],[\"2011-12-25\",0],[\"2011-12-26\",10.63],[\"2011-12-27\",32.34],[\"2011-12-28\",2.78],[\"2011-12-29\",0],[\"2011-12-30\",0],[\"2011-12-31\",0],[\"2012-01-01\",0],[\"2012-01-02\",0],[\"2012-01-03\",0],[\"2012-01-04\",0],[\"2012-01-05\",0],[\"2012-01-06\",0],[\"2012-01-07\",0],[\"2012-01-08\",1.74],[\"2012-01-09\",2.62],[\"2012-01-10\",2.46],[\"2012-01-11\",2.45],[\"2012-01-12\",1.96],[\"2012-01-13\",0],[\"2012-01-14\",0],[\"2012-01-15\",0],[\"2012-01-16\",0],[\"2012-01-17\",0.47],[\"2012-01-18\",9.31],[\"2012-01-19\",0],[\"2012-01-20\",2.09],[\"2012-01-21\",14.67],[\"2012-01-22\",27.32],[\"2012-01-23\",1.63],[\"2012-01-24\",9.41],[\"2012-01-25\",0],[\"2012-01-26\",0],[\"2012-01-27\",5.36],[\"2012-01-28\",0],[\"2012-01-29\",0],[\"2012-01-30\",0],[\"2012-01-31\",0],[\"2012-02-01\",0],[\"2012-02-02\",4.81],[\"2012-02-03\",0],[\"2012-02-04\",0.08],[\"2012-02-05\",0.6],[\"2012-02-06\",0],[\"2012-02-07\",0],[\"2012-02-08\",0],[\"2012-02-09\",0],[\"2012-02-10\",0],[\"2012-02-11\",0],[\"2012-02-12\",0],[\"2012-02-13\",0],[\"2012-02-14\",1.73],[\"2012-02-15\",0.6],[\"2012-02-16\",1.09],[\"2012-02-17\",1.01],[\"2012-02-18\",0],[\"2012-02-19\",11.51],[\"2012-02-20\",6.71],[\"2012-02-21\",0],[\"2012-02-22\",0],[\"2012-02-23\",0.02],[\"2012-02-24\",0],[\"2012-02-25\",10.64],[\"2012-02-26\",0],[\"2012-02-27\",2.28],[\"2012-02-28\",0.45],[\"2012-02-29\",2.3],[\"2012-03-01\",5.26],[\"2012-03-02\",0],[\"2012-03-03\",35.96],[\"2012-03-04\",2.85],[\"2012-03-05\",0],[\"2012-03-06\",0],[\"2012-03-07\",0],[\"2012-03-08\",0],[\"2012-03-09\",4.38],[\"2012-03-10\",2.38],[\"2012-03-11\",0],[\"2012-03-12\",0],[\"2012-03-13\",0.82],[\"2012-03-14\",6.79],[\"2012-03-15\",0],[\"2012-03-16\",1.88],[\"2012-03-17\",3.66],[\"2012-03-18\",2.15],[\"2012-03-19\",0],[\"2012-03-20\",0],[\"2012-03-21\",0],[\"2012-03-22\",0],[\"2012-03-23\",0.34],[\"2012-03-24\",0],[\"2012-03-25\",0],[\"2012-03-26\",0],[\"2012-03-27\",0],[\"2012-03-28\",0],[\"2012-03-29\",0],[\"2012-03-30\",0],[\"2012-03-31\",7.6],[\"2012-04-01\",0],[\"2012-04-02\",0],[\"2012-04-03\",0],[\"2012-04-04\",10.77],[\"2012-04-05\",0],[\"2012-04-06\",0.01],[\"2012-04-07\",0],[\"2012-04-08\",0],[\"2012-04-09\",0],[\"2012-04-10\",0],[\"2012-04-11\",0],[\"2012-04-12\",0],[\"2012-04-13\",0],[\"2012-04-14\",0],[\"2012-04-15\",0],[\"2012-04-16\",0],[\"2012-04-17\",0],[\"2012-04-18\",9.28],[\"2012-04-19\",9.9],[\"2012-04-20\",0],[\"2012-04-21\",0],[\"2012-04-22\",8.42],[\"2012-04-23\",0],[\"2012-04-24\",0],[\"2012-04-25\",0],[\"2012-04-26\",0],[\"2012-04-27\",0],[\"2012-04-28\",0.41],[\"2012-04-29\",0],[\"2012-04-30\",0],[\"2012-05-01\",0],[\"2012-05-02\",0],[\"2012-05-03\",0],[\"2012-05-04\",0.12],[\"2012-05-05\",1.12],[\"2012-05-06\",0],[\"2012-05-07\",0],[\"2012-05-08\",5.71],[\"2012-05-09\",7.78],[\"2012-05-10\",9.36],[\"2012-05-11\",0],[\"2012-05-12\",0],[\"2012-05-13\",2.66],[\"2012-05-14\",21.4],[\"2012-05-15\",1.99],[\"2012-05-16\",0],[\"2012-05-17\",0],[\"2012-05-18\",2.36],[\"2012-05-19\",0],[\"2012-05-20\",0],[\"2012-05-21\",0],[\"2012-05-22\",5.19],[\"2012-05-23\",5.15],[\"2012-05-24\",0],[\"2012-05-25\",0],[\"2012-05-26\",0],[\"2012-05-27\",0],[\"2012-05-28\",0],[\"2012-05-29\",1.49],[\"2012-05-30\",10.81],[\"2012-05-31\",0],[\"2012-06-01\",12.12],[\"2012-06-02\",0.57],[\"2012-06-03\",0],[\"2012-06-04\",7.48],[\"2012-06-05\",1.66],[\"2012-06-06\",2.61],[\"2012-06-07\",0],[\"2012-06-08\",0],[\"2012-06-09\",0],[\"2012-06-10\",1.82],[\"2012-06-11\",43.68],[\"2012-06-12\",11.21],[\"2012-06-13\",0],[\"2012-06-14\",0],[\"2012-06-15\",0],[\"2012-06-16\",0],[\"2012-06-17\",0],[\"2012-06-18\",0],[\"2012-06-19\",0],[\"2012-06-20\",0],[\"2012-06-21\",0],[\"2012-06-22\",0],[\"2012-06-23\",0],[\"2012-06-24\",0.04],[\"2012-06-25\",0],[\"2012-06-26\",0],[\"2012-06-27\",0],[\"2012-06-28\",0],[\"2012-06-29\",0],[\"2012-06-30\",0],[\"2012-07-01\",0],[\"2012-07-02\",10.71],[\"2012-07-03\",0],[\"2012-07-04\",1.26],[\"2012-07-05\",0],[\"2012-07-06\",0],[\"2012-07-07\",1.04],[\"2012-07-08\",0],[\"2012-07-09\",0],[\"2012-07-10\",22.51],[\"2012-07-11\",21.07],[\"2012-07-12\",8.77],[\"2012-07-13\",11.96],[\"2012-07-14\",6.64],[\"2012-07-15\",11],[\"2012-07-16\",0],[\"2012-07-17\",0.22],[\"2012-07-18\",0.09],[\"2012-07-19\",4.77],[\"2012-07-20\",0],[\"2012-07-21\",3.5],[\"2012-07-22\",13.67],[\"2012-07-23\",0],[\"2012-07-24\",0],[\"2012-07-25\",0],[\"2012-07-26\",0],[\"2012-07-27\",0],[\"2012-07-28\",3.37],[\"2012-07-29\",0],[\"2012-07-30\",0],[\"2012-07-31\",0.44],[\"2012-08-01\",1.8],[\"2012-08-02\",0.18],[\"2012-08-03\",0],[\"2012-08-04\",0.04],[\"2012-08-05\",3.86],[\"2012-08-06\",0.63],[\"2012-08-07\",1.28],[\"2012-08-08\",0.43],[\"2012-08-09\",14.63],[\"2012-08-10\",27.52],[\"2012-08-11\",0],[\"2012-08-12\",2.03],[\"2012-08-13\",0],[\"2012-08-14\",1.58],[\"2012-08-15\",0.51],[\"2012-08-16\",0],[\"2012-08-17\",0],[\"2012-08-18\",0],[\"2012-08-19\",6.1],[\"2012-08-20\",1.16],[\"2012-08-21\",0],[\"2012-08-22\",2.78],[\"2012-08-23\",0],[\"2012-08-24\",0],[\"2012-08-25\",0],[\"2012-08-26\",0],[\"2012-08-27\",0],[\"2012-08-28\",1.71],[\"2012-08-29\",25.57],[\"2012-08-30\",0],[\"2012-08-31\",0],[\"2012-09-01\",0],[\"2012-09-02\",0],[\"2012-09-03\",1.37],[\"2012-09-04\",29.03],[\"2012-09-05\",19.53],[\"2012-09-06\",0],[\"2012-09-07\",0],[\"2012-09-08\",0],[\"2012-09-09\",19.27],[\"2012-09-10\",0],[\"2012-09-11\",0],[\"2012-09-12\",0],[\"2012-09-13\",0],[\"2012-09-14\",0],[\"2012-09-15\",0],[\"2012-09-16\",0],[\"2012-09-17\",4.35],[\"2012-09-18\",5.29],[\"2012-09-19\",6.14],[\"2012-09-20\",0],[\"2012-09-21\",0],[\"2012-09-22\",0],[\"2012-09-23\",0],[\"2012-09-24\",0],[\"2012-09-25\",0],[\"2012-09-26\",0],[\"2012-09-27\",0],[\"2012-09-28\",0],[\"2012-09-29\",11.34],[\"2012-09-30\",0],[\"2012-10-01\",24.03],[\"2012-10-02\",27.56],[\"2012-10-03\",0],[\"2012-10-04\",0],[\"2012-10-05\",0],[\"2012-10-06\",0],[\"2012-10-07\",0],[\"2012-10-08\",0],[\"2012-10-09\",0],[\"2012-10-10\",0],[\"2012-10-11\",0],[\"2012-10-12\",0],[\"2012-10-13\",0],[\"2012-10-14\",0],[\"2012-10-15\",1.78],[\"2012-10-16\",1.07],[\"2012-10-17\",0],[\"2012-10-18\",0],[\"2012-10-19\",0],[\"2012-10-20\",0],[\"2012-10-21\",0],[\"2012-10-22\",0],[\"2012-10-23\",0],[\"2012-10-24\",0],[\"2012-10-25\",0],[\"2012-10-26\",0],[\"2012-10-27\",0],[\"2012-10-28\",0],[\"2012-10-29\",0],[\"2012-10-30\",0],[\"2012-10-31\",0],[\"2012-11-01\",0],[\"2012-11-02\",0],[\"2012-11-03\",0],[\"2012-11-04\",0],[\"2012-11-05\",0],[\"2012-11-06\",10.12],[\"2012-11-07\",2.33],[\"2012-11-08\",0.41],[\"2012-11-09\",0],[\"2012-11-10\",0],[\"2012-11-11\",0],[\"2012-11-12\",0],[\"2012-11-13\",4.52],[\"2012-11-14\",0],[\"2012-11-15\",8.44],[\"2012-11-16\",0],[\"2012-11-17\",0],[\"2012-11-18\",0],[\"2012-11-19\",0],[\"2012-11-20\",0],[\"2012-11-21\",0],[\"2012-11-22\",0],[\"2012-11-23\",0],[\"2012-11-24\",0],[\"2012-11-25\",0],[\"2012-11-26\",0],[\"2012-11-27\",1.04],[\"2012-11-28\",0.33],[\"2012-11-29\",0],[\"2012-11-30\",0],[\"2012-12-01\",0],[\"2012-12-02\",0],[\"2012-12-03\",0],[\"2012-12-04\",0],[\"2012-12-05\",0],[\"2012-12-06\",0],[\"2012-12-07\",0.37],[\"2012-12-08\",0],[\"2012-12-09\",0.39],[\"2012-12-10\",0],[\"2012-12-11\",20.3],[\"2012-12-12\",0],[\"2012-12-13\",0],[\"2012-12-14\",0],[\"2012-12-15\",0],[\"2012-12-16\",0],[\"2012-12-17\",35.09],[\"2012-12-18\",5.76],[\"2012-12-19\",0],[\"2012-12-20\",0],[\"2012-12-21\",21.75],[\"2012-12-22\",0],[\"2012-12-23\",0],[\"2012-12-24\",3.11],[\"2012-12-25\",11.5],[\"2012-12-26\",42.25],[\"2012-12-27\",0],[\"2012-12-28\",0],[\"2012-12-29\",15.32],[\"2012-12-30\",0],[\"2012-12-31\",0],[\"2013-01-01\",0],[\"2013-01-02\",27.08],[\"2013-01-03\",0],[\"2013-01-04\",0],[\"2013-01-05\",0],[\"2013-01-06\",0.35],[\"2013-01-07\",0],[\"2013-01-08\",0],[\"2013-01-09\",0],[\"2013-01-10\",0],[\"2013-01-11\",1.77],[\"2013-01-12\",1.49],[\"2013-01-13\",0],[\"2013-01-14\",1.7],[\"2013-01-15\",0.98],[\"2013-01-16\",9.51],[\"2013-01-17\",23.37],[\"2013-01-18\",27.14],[\"2013-01-19\",0],[\"2013-01-20\",0],[\"2013-01-21\",0],[\"2013-01-22\",0],[\"2013-01-23\",0],[\"2013-01-24\",0],[\"2013-01-25\",0],[\"2013-01-26\",0],[\"2013-01-27\",0],[\"2013-01-28\",0],[\"2013-01-29\",0],[\"2013-01-30\",0],[\"2013-01-31\",33.13],[\"2013-02-01\",0],[\"2013-02-02\",0],[\"2013-02-03\",3.83],[\"2013-02-04\",0],[\"2013-02-05\",0],[\"2013-02-06\",0],[\"2013-02-07\",0],[\"2013-02-08\",21.21],[\"2013-02-09\",0],[\"2013-02-10\",0],[\"2013-02-11\",28.93],[\"2013-02-12\",7.23],[\"2013-02-13\",6.99],[\"2013-02-14\",0.33],[\"2013-02-15\",0],[\"2013-02-16\",0],[\"2013-02-17\",0],[\"2013-02-18\",0],[\"2013-02-19\",3.75],[\"2013-02-20\",4.75],[\"2013-02-21\",0],[\"2013-02-22\",27.31],[\"2013-02-23\",24.79],[\"2013-02-24\",0.67],[\"2013-02-25\",0],[\"2013-02-26\",35.9],[\"2013-02-27\",3.78],[\"2013-02-28\",0],[\"2013-03-01\",0],[\"2013-03-02\",0],[\"2013-03-03\",0],[\"2013-03-04\",0],[\"2013-03-05\",0],[\"2013-03-06\",1.72],[\"2013-03-07\",0],[\"2013-03-08\",0],[\"2013-03-09\",0],[\"2013-03-10\",0],[\"2013-03-11\",0],[\"2013-03-12\",20.9],[\"2013-03-13\",0],[\"2013-03-14\",0],[\"2013-03-15\",0],[\"2013-03-16\",0],[\"2013-03-17\",0],[\"2013-03-18\",0],[\"2013-03-19\",13.15],[\"2013-03-20\",0],[\"2013-03-21\",0],[\"2013-03-22\",0],[\"2013-03-23\",3],[\"2013-03-24\",52.62],[\"2013-03-25\",2.3],[\"2013-03-26\",0],[\"2013-03-27\",0],[\"2013-03-28\",0],[\"2013-03-29\",0],[\"2013-03-30\",0],[\"2013-03-31\",3.97],[\"2013-04-01\",11.67],[\"2013-04-02\",0],[\"2013-04-03\",0],[\"2013-04-04\",2.89],[\"2013-04-05\",11.79],[\"2013-04-06\",0],[\"2013-04-07\",0],[\"2013-04-08\",0],[\"2013-04-09\",0],[\"2013-04-10\",0],[\"2013-04-11\",0],[\"2013-04-12\",19.12],[\"2013-04-13\",0],[\"2013-04-14\",0],[\"2013-04-15\",2.74],[\"2013-04-16\",0],[\"2013-04-17\",0],[\"2013-04-18\",0],[\"2013-04-19\",0],[\"2013-04-20\",18.1],[\"2013-04-21\",0],[\"2013-04-22\",0],[\"2013-04-23\",0],[\"2013-04-24\",0],[\"2013-04-25\",0.9],[\"2013-04-26\",0],[\"2013-04-27\",0.49],[\"2013-04-28\",4.84],[\"2013-04-29\",23.44],[\"2013-04-30\",0],[\"2013-05-01\",0],[\"2013-05-02\",0],[\"2013-05-03\",0.01],[\"2013-05-04\",4.45],[\"2013-05-05\",50.31],[\"2013-05-06\",22.33],[\"2013-05-07\",2.84],[\"2013-05-08\",0],[\"2013-05-09\",0],[\"2013-05-10\",0],[\"2013-05-11\",0],[\"2013-05-12\",8.86],[\"2013-05-13\",0],[\"2013-05-14\",0],[\"2013-05-15\",0],[\"2013-05-16\",0],[\"2013-05-17\",0],[\"2013-05-18\",2.3],[\"2013-05-19\",1.82],[\"2013-05-20\",1.73],[\"2013-05-21\",0],[\"2013-05-22\",1.96],[\"2013-05-23\",8.71],[\"2013-05-24\",0],[\"2013-05-25\",0],[\"2013-05-26\",0],[\"2013-05-27\",0],[\"2013-05-28\",0],[\"2013-05-29\",0],[\"2013-05-30\",0],[\"2013-05-31\",0],[\"2013-06-01\",0],[\"2013-06-02\",0],[\"2013-06-03\",14.14],[\"2013-06-04\",1.44],[\"2013-06-05\",0],[\"2013-06-06\",99.83],[\"2013-06-07\",10.63],[\"2013-06-08\",8.04],[\"2013-06-09\",0],[\"2013-06-10\",36.74],[\"2013-06-11\",32.6],[\"2013-06-12\",0],[\"2013-06-13\",0],[\"2013-06-14\",7.81],[\"2013-06-15\",0],[\"2013-06-16\",0],[\"2013-06-17\",8.4],[\"2013-06-18\",21.47],[\"2013-06-19\",27.8],[\"2013-06-20\",0],[\"2013-06-21\",0],[\"2013-06-22\",0],[\"2013-06-23\",0],[\"2013-06-24\",3.45],[\"2013-06-25\",0.96],[\"2013-06-26\",6.61],[\"2013-06-27\",2.03],[\"2013-06-28\",0.37],[\"2013-06-29\",0.47],[\"2013-06-30\",3.9],[\"2013-07-01\",3.64],[\"2013-07-02\",0],[\"2013-07-03\",0.92],[\"2013-07-04\",28.64],[\"2013-07-05\",34.19],[\"2013-07-06\",16.3],[\"2013-07-07\",32.7],[\"2013-07-08\",7.13],[\"2013-07-09\",1.21],[\"2013-07-10\",66.82],[\"2013-07-11\",32.32],[\"2013-07-12\",0],[\"2013-07-13\",6.09],[\"2013-07-14\",8.14],[\"2013-07-15\",4.46],[\"2013-07-16\",0.76],[\"2013-07-17\",0],[\"2013-07-18\",44.55],[\"2013-07-19\",0],[\"2013-07-20\",0.14],[\"2013-07-21\",1.95],[\"2013-07-22\",4.1],[\"2013-07-23\",9.28],[\"2013-07-24\",1.19],[\"2013-07-25\",0],[\"2013-07-26\",0],[\"2013-07-27\",12.86],[\"2013-07-28\",0.35],[\"2013-07-29\",4.98],[\"2013-07-30\",0],[\"2013-07-31\",0.71],[\"2013-08-01\",3.2],[\"2013-08-02\",0],[\"2013-08-03\",0],[\"2013-08-04\",0],[\"2013-08-05\",0],[\"2013-08-06\",0],[\"2013-08-07\",5.85],[\"2013-08-08\",17.24],[\"2013-08-09\",0.06],[\"2013-08-10\",0],[\"2013-08-11\",1.16],[\"2013-08-12\",0.69],[\"2013-08-13\",11.03],[\"2013-08-14\",0],[\"2013-08-15\",0.01],[\"2013-08-16\",29],[\"2013-08-17\",7.27],[\"2013-08-18\",12.91],[\"2013-08-19\",19.34],[\"2013-08-20\",1.17],[\"2013-08-21\",4.7],[\"2013-08-22\",0.24],[\"2013-08-23\",0],[\"2013-08-24\",0.37],[\"2013-08-25\",0],[\"2013-08-26\",0],[\"2013-08-27\",0],[\"2013-08-28\",0],[\"2013-08-29\",0],[\"2013-08-30\",0],[\"2013-08-31\",0],[\"2013-09-01\",12.83],[\"2013-09-02\",9.48],[\"2013-09-03\",0],[\"2013-09-04\",0],[\"2013-09-05\",0],[\"2013-09-06\",0],[\"2013-09-07\",0],[\"2013-09-08\",0],[\"2013-09-09\",0],[\"2013-09-10\",0],[\"2013-09-11\",0],[\"2013-09-12\",0],[\"2013-09-13\",0],[\"2013-09-14\",0],[\"2013-09-15\",0],[\"2013-09-16\",0],[\"2013-09-17\",0],[\"2013-09-18\",0],[\"2013-09-19\",0],[\"2013-09-20\",0],[\"2013-09-21\",0],[\"2013-09-22\",28.72],[\"2013-09-23\",0],[\"2013-09-24\",1.4],[\"2013-09-25\",6.9],[\"2013-09-26\",18.4],[\"2013-09-27\",0],[\"2013-09-28\",0],[\"2013-09-29\",0],[\"2013-09-30\",0],[\"2013-10-01\",0],[\"2013-10-02\",0],[\"2013-10-03\",0],[\"2013-10-04\",0],[\"2013-10-05\",0],[\"2013-10-06\",0],[\"2013-10-07\",29.47],[\"2013-10-08\",0],[\"2013-10-09\",0],[\"2013-10-10\",0],[\"2013-10-11\",0],[\"2013-10-12\",0],[\"2013-10-13\",0],[\"2013-10-14\",0],[\"2013-10-15\",0],[\"2013-10-16\",0],[\"2013-10-17\",0],[\"2013-10-18\",2.13],[\"2013-10-19\",0.4],[\"2013-10-20\",0.5],[\"2013-10-21\",0],[\"2013-10-22\",0],[\"2013-10-23\",0],[\"2013-10-24\",0],[\"2013-10-25\",0],[\"2013-10-26\",0],[\"2013-10-27\",0],[\"2013-10-28\",0.34],[\"2013-10-29\",0.54],[\"2013-10-30\",0],[\"2013-10-31\",0],[\"2013-11-01\",1.5],[\"2013-11-02\",11.1],[\"2013-11-03\",0],[\"2013-11-04\",0],[\"2013-11-05\",0],[\"2013-11-06\",0],[\"2013-11-07\",0],[\"2013-11-08\",0],[\"2013-11-09\",0],[\"2013-11-10\",0],[\"2013-11-11\",0],[\"2013-11-12\",0],[\"2013-11-13\",0],[\"2013-11-14\",0],[\"2013-11-15\",0],[\"2013-11-16\",3.19],[\"2013-11-17\",0],[\"2013-11-18\",3.69],[\"2013-11-19\",0],[\"2013-11-20\",0],[\"2013-11-21\",0],[\"2013-11-22\",0],[\"2013-11-23\",2.55],[\"2013-11-24\",0],[\"2013-11-25\",0],[\"2013-11-26\",5.61],[\"2013-11-27\",35.51],[\"2013-11-28\",2.2],[\"2013-11-29\",0],[\"2013-11-30\",0],[\"2013-12-01\",0],[\"2013-12-02\",0],[\"2013-12-03\",5.85],[\"2013-12-04\",17.27],[\"2013-12-05\",3.93],[\"2013-12-06\",0.29],[\"2013-12-07\",6.69],[\"2013-12-08\",2.3],[\"2013-12-09\",3.06],[\"2013-12-10\",11.15],[\"2013-12-11\",1.4],[\"2013-12-12\",0],[\"2013-12-13\",0],[\"2013-12-14\",0],[\"2013-12-15\",18.5],[\"2013-12-16\",0],[\"2013-12-17\",0],[\"2013-12-18\",0],[\"2013-12-19\",0],[\"2013-12-20\",0],[\"2013-12-21\",0],[\"2013-12-22\",0.36],[\"2013-12-23\",90.22],[\"2013-12-24\",1.49],[\"2013-12-25\",0],[\"2013-12-26\",0],[\"2013-12-27\",0],[\"2013-12-28\",0],[\"2013-12-29\",47.6],[\"2013-12-30\",0],[\"2013-12-31\",0],[\"2014-01-01\",1],[\"2014-01-02\",2]],\"name\":\"ptone\"}]}]}";
            return data;
        }

        private string ConstructParameterString(out string errorMsg, string dataset, ITimeSeriesInput componentInput)
        {
            errorMsg = "";
            StringBuilder sb = new StringBuilder();
            try
            {
                sb.Append("{'metainfo': { },'parameter': [{'name': 'input_zone_features','value': {'type':'FeatureCollection', 'features':" +
                    "[{'type':'Feature', 'properties':{'name': 'pt one','gid': 1},'geometry':{'type':'Point','coordinates':[");

                // Append point longitude and latitude values to string
                sb.Append(componentInput.Geometry.Point.Longitude.ToString() + ", " + componentInput.Geometry.Point.Latitude.ToString());
                sb.Append("],'crs':{ 'type':'name','properties':{ 'name':'EPSG:4326'} } } } ] } }, { " +
                    "'name': 'units', 'value': 'metric'}, {'name': 'climate_data','value': [");

                // Append dataset
                // Valid dataset: 'ppt', 'tmin', 'tmax', 'tdmean', 'vpdmin', vpdmax'
                sb.Append(dataset);
                sb.Append("] }, {'name': 'start_date','value': ");

                // Append start date
                sb.Append(componentInput.DateTimeSpan.StartDate.ToString("yyyy-MM-dd"));
                sb.Append("}, {'name': 'end_date','value': ");
                // Append end date
                sb.Append(componentInput.DateTimeSpan.EndDate.ToString("yyyy-MM-dd"));
                sb.Append("}]}");
            }
            catch(Exception ex)
            {
                errorMsg = "ERROR: " + ex.Message;
            }
            return sb.ToString();
        }

        private async Task<string> DownloadData(string url, string parameters)
        {
            string data = "";
            try
            {
                // TODO: Read in max retry attempt from config file.
                int retries = 5;

                // Response status message
                string status = "";

                var content = new StringContent(parameters, Encoding.UTF8, "application/json");
                using (var client = new HttpClient())
                {
                    while (retries > 0 && !status.Contains("OK"))
                    {
                        Thread.Sleep(100);
                        var response = await client.PostAsync(url, content);
                        data =  await response.Content.ReadAsStringAsync();
                        status = response.StatusCode.ToString();
                        retries -= 1;
                    }
                }
            }
            catch (Exception ex)
            {
                return "ERROR: Unable to download requested prism data. " + ex.Message;
            }
            return data;
        }

        /// <summary>
        /// Takes the data recieved from prism and sets the ITimeSeries object values.
        /// </summary>
        /// <param name="errorMsg"></param>
        /// <param name="dataset"></param>
        /// <param name="component"></param>
        /// <param name="data"></param>
        /// <returns></returns>
        public ITimeSeriesOutput SetDataToOutput(out string errorMsg, string dataset, string data, ITimeSeriesOutput output, ITimeSeriesInput input)
        {
            errorMsg = "";
            PRISMData.PRISM content;
            try
            {
                content = Newtonsoft.Json.JsonConvert.DeserializeObject<PRISMData.PRISM>(data);
            }
            catch(Newtonsoft.Json.JsonException ex)
            {
                errorMsg = "PRISM JSON Deserialization Error: " + ex.Message;
                return null;
            }
            output.Dataset = dataset;
            output.DataSource = input.Source;
            output.Metadata = SetMetadata(out errorMsg, content, input, output);
            output.Data = SetData(out errorMsg, content, input.DateTimeSpan.DateTimeFormat, input.DataValueFormat);
            return output;
        }

        /// <summary>
        /// Parses data string from prism and sets the metadata for the ITimeSeries object.
        /// </summary>
        /// <param name="errorMsg"></param>
        /// <param name="data"></param>
        /// <param name="output"></param>
        /// <returns></returns>
        private Dictionary<string, string> SetMetadata(out string errorMsg, PRISMData.PRISM content, ITimeSeriesInput input, ITimeSeriesOutput output)
        {
            errorMsg = "";
            Dictionary<string, string> meta = output.Metadata;
            foreach(PropertyInfo p in typeof(PRISMData.Metainfo).GetProperties())
            {
                if (!meta.ContainsKey(p.Name) || !meta.ContainsKey("prism_" + p.Name))
                {
                    meta.Add("prism_" + p.Name, p.GetValue(content.metainfo, null).ToString());
                }
            }

            meta.Add("prism_start_date", input.DateTimeSpan.StartDate.ToString());
            meta.Add("prism_end_date", input.DateTimeSpan.EndDate.ToString());
            meta.Add("prism_point_longitude", input.Geometry.Point.Longitude.ToString());
            meta.Add("prism_point_latitude", input.Geometry.Point.Latitude.ToString());
            if (output.Dataset == "Precipitation") {
                meta.Add("prism_unit", "mm");
            }
            else
            {
                meta.Add("prism_unit", "degC");
            }
            return meta;
        }

        /// <summary>
        /// Parses data string from prism and sets the data for the ITimeSeries object.
        /// </summary>
        /// <param name="errorMsg"></param>
        /// <param name="data"></param>
        /// <returns></returns>
        private Dictionary<string, List<string>> SetData(out string errorMsg, PRISMData.PRISM content, string dateFormat, string dataFormat)
        {
            errorMsg = "";
            Dictionary<string, List<string>> dataDict = new Dictionary<string, List<string>>();
            for (int i = 1; i < content.result[0].value[0].data.Count; i++)
            {
                DateTime.TryParseExact(content.result[0].value[0].data[i][0].ToString(), new string[] { "yyyy-MM-dd" }, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out DateTime newDate);
                Double.TryParse(content.result[0].value[0].data[i][1].ToString(), out double dataValue);
                dataDict.Add(newDate.ToString(dateFormat), new List<string> { dataValue.ToString(dataFormat) });
            }
            return dataDict;
        }
    }
}
